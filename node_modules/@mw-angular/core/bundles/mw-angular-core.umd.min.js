!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/animations"),require("rxjs"),require("@angular/common"),require("rxjs/operators"),require("@angular/platform-browser"),require("@nguniversal/express-engine/tokens")):"function"==typeof define&&define.amd?define("@mw-angular/core",["exports","@angular/core","@angular/animations","rxjs","@angular/common","rxjs/operators","@angular/platform-browser","@nguniversal/express-engine/tokens"],t):t(((e=e||self)["mw-angular"]=e["mw-angular"]||{},e["mw-angular"].core={}),e.ng.core,e.ng.animations,e.rxjs,e.ng.common,e.rxjs.operators,e.ng.platformBrowser,e["@nguniversal/express-engine/tokens"])}(this,function(e,t,r,n,o,i,s,a){"use strict";var c=new t.InjectionToken("mw-environment"),u=function(){function e(e){if(e)throw new Error("MwCoreModule has already been loaded. Import it in the AppModule only.")}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:c,useValue:t}]}},e.decorators=[{type:t.NgModule}],e.ctorParameters=function(){return[{type:e,decorators:[{type:t.Optional},{type:t.SkipSelf}]}]},e}(),l={removableChildWrap:r.trigger("removableChildWrap",[r.transition(":leave",r.query("@*",[r.animateChild()],{optional:!0}))])},f=function(){function e(e){this.environment=null!==e?e:{}}return e.prototype.getValue=function(e,t){return this.environment[e]||t},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[c]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(c,8))},token:e,providedIn:"root"}),e}(),d=function(){function e(){this.errorLockSubject=new n.BehaviorSubject(null)}return e.prototype.getErrorLock=function(){return this.errorLockSubject.asObservable()},e.prototype.setErrorLock=function(e){this.errorLockSubject.next(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),p=function(){function e(e,t){this.document=t,this.renderer=e.createRenderer(null,null)}return e.prototype.updateTags=function(e,t,r){var n=this;Array.from(this.document.querySelectorAll(e)).forEach(function(e){n.renderer.setAttribute(e,t,r)})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.RendererFactory2},{type:undefined,decorators:[{type:t.Inject,args:[o.DOCUMENT]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.RendererFactory2),t.ɵɵinject(o.DOCUMENT))},token:e,providedIn:"root"}),e}(),h=function(){function e(){this.isLoadingSubjectsPool={}}return e.prototype.getIsLoading=function(e){return void 0===e&&(e="general"),this.checkAndInitIsLoadingSubject(e),this.isLoadingSubjectsPool[e].asObservable().pipe(i.map(function(e){return e>0}),i.distinctUntilChanged(),i.debounceTime(100))},e.prototype.startObservable=function(e){var t=this;return void 0===e&&(e="general"),new n.Observable(function(r){return t.start(e),r.next(),r.complete(),function(){}})},e.prototype.start=function(e){void 0===e&&(e="general"),this.checkAndInitIsLoadingSubject(e),this.isLoadingSubjectsPool[e].next(this.isLoadingSubjectsPool[e].value+1)},e.prototype.stop=function(e){if(void 0===e&&(e="general"),this.isLoadingSubjectsPool[e]===undefined)throw new Error("Loading subject was not created for tag: "+e+".");this.isLoadingSubjectsPool[e].value>0&&this.isLoadingSubjectsPool[e].next(this.isLoadingSubjectsPool[e].value-1)},e.prototype.destroy=function(e){void 0===e&&(e="general"),this.isLoadingSubjectsPool[e]!==undefined&&(this.isLoadingSubjectsPool[e].next(0),this.isLoadingSubjectsPool[e].complete(),delete this.isLoadingSubjectsPool[e])},e.prototype.checkAndInitIsLoadingSubject=function(e){this.isLoadingSubjectsPool[e]===undefined&&(this.isLoadingSubjectsPool[e]=new n.BehaviorSubject(0))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),g=function(){function e(e){this.platformId=e}return e.prototype.isBrowser=function(){return o.isPlatformBrowser(this.platformId)},e.prototype.isServer=function(){return o.isPlatformServer(this.platformId)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.PLATFORM_ID))},token:e,providedIn:"root"}),e}(),m=function(){function e(e,t){this.mwPlatformService=e,this.mwEnvironmentService=t,this.envKeyPrefix="localStorageKeyPrefix"}return e.prototype.serialize=function(e){return JSON.stringify(e)},e.prototype.unserialize=function(e){return JSON.parse(e)},e.prototype.setItem=function(e,t){if(this.mwPlatformService.isBrowser()){var r=this.serialize(t);localStorage.setItem(this.getPrefixedKey(e),r)}},e.prototype.getItem=function(e){if(this.mwPlatformService.isBrowser()){var t=localStorage.getItem(this.getPrefixedKey(e));if(null!==t)return this.unserialize(t)}return null},e.prototype.deleteItem=function(e){this.mwPlatformService.isBrowser()&&localStorage.removeItem(this.getPrefixedKey(e))},e.prototype.clear=function(){this.mwPlatformService.isBrowser()&&localStorage.clear()},e.prototype.getPrefixedKey=function(e){return this.mwEnvironmentService.getValue(this.envKeyPrefix,"")+e},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:g},{type:f}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(g),t.ɵɵinject(f))},token:e,providedIn:"root"}),e}(),v=function(){function e(e,t){this.mwEnvironmentService=e,this.title=t,this.envTitlePrefix="titlePrefix",this.envTitlePostfix="titlePostfix",this.pageTitleSubject=new n.BehaviorSubject("")}return e.prototype.setTitle=function(e){var t=this.mwEnvironmentService.getValue(this.envTitlePrefix,""),r=this.mwEnvironmentService.getValue(this.envTitlePostfix,"");this.title.setTitle(""+t+e+r),this.pageTitleSubject.next(e)},e.prototype.getPageTitle=function(){return this.pageTitleSubject.asObservable()},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:f},{type:s.Title}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(f),t.ɵɵinject(s.Title))},token:e,providedIn:"root"}),e}(),w=function(){function e(e,t,r){this.mwPlatformService=e,this.document=t,this.request=r}return e.prototype.hasRequest=function(){return this.mwPlatformService.isServer()&&null!==this.request||this.mwPlatformService.isBrowser()},e.prototype.getHost=function(){var e;if(this.mwPlatformService.isServer()){if(null===this.request)throw new Error("Request object in not set.");e=this.request.get("host")}else{if(!this.mwPlatformService.isBrowser())throw new Error("Unknown platform.");e=this.document.location.host}if(void 0===e)throw new Error("Host is undefined.");return e},e.prototype.getLocationOrigin=function(){var e;if(this.mwPlatformService.isServer()){if(null===this.request)throw new Error("Request object in not set.");var t=this.request.get("host");if(void 0===t)throw new Error("Host is undefined.");e=this.request.protocol+"://"+t}else{if(!this.mwPlatformService.isBrowser())throw new Error("Unknown platform.");e=this.document.location.origin}return e},e.prototype.getLocationPathname=function(){var e;if(this.mwPlatformService.isServer()){if(null===this.request)throw new Error("Request object in not set.");e=this.request.path}else{if(!this.mwPlatformService.isBrowser())throw new Error("Unknown platform.");e=this.document.location.pathname}return e},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:g},{type:undefined,decorators:[{type:t.Inject,args:[o.DOCUMENT]}]},{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[a.REQUEST]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(g),t.ɵɵinject(o.DOCUMENT),t.ɵɵinject(a.REQUEST,8))},token:e,providedIn:"root"}),e}();e.MwCoreModule=u,e.MwEnvironmentService=f,e.MwErrorLockService=d,e.MwHtmlService=p,e.MwLoadingService=h,e.MwLocalStorageService=m,e.MwMetaService=v,e.MwPlatformService=g,e.MwRequestService=w,e.mwBaseAnimations=l,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mw-angular-core.umd.min.js.map