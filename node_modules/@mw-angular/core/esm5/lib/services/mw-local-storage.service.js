/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { MwEnvironmentService } from './mw-environment.service';
import { MwPlatformService } from './mw-platform.service';
import * as i0 from "@angular/core";
import * as i1 from "./mw-platform.service";
import * as i2 from "./mw-environment.service";
var MwLocalStorageService = /** @class */ (function () {
    function MwLocalStorageService(mwPlatformService, mwEnvironmentService) {
        this.mwPlatformService = mwPlatformService;
        this.mwEnvironmentService = mwEnvironmentService;
        this.envKeyPrefix = 'localStorageKeyPrefix';
    }
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    MwLocalStorageService.prototype.serialize = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return JSON.stringify(data);
    };
    /**
     * @private
     * @template T
     * @param {?} data
     * @return {?}
     */
    MwLocalStorageService.prototype.unserialize = /**
     * @private
     * @template T
     * @param {?} data
     * @return {?}
     */
    function (data) {
        return JSON.parse(data);
    };
    /**
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    MwLocalStorageService.prototype.setItem = /**
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    function (key, value) {
        if (this.mwPlatformService.isBrowser()) {
            /** @type {?} */
            var serializedData = this.serialize(value);
            localStorage.setItem(this.getPrefixedKey(key), serializedData);
        }
    };
    /**
     * @template T
     * @param {?} key
     * @return {?}
     */
    MwLocalStorageService.prototype.getItem = /**
     * @template T
     * @param {?} key
     * @return {?}
     */
    function (key) {
        if (this.mwPlatformService.isBrowser()) {
            /** @type {?} */
            var value = localStorage.getItem(this.getPrefixedKey(key));
            if (value !== null) {
                return this.unserialize(value);
            }
        }
        return null;
    };
    /**
     * @param {?} key
     * @return {?}
     */
    MwLocalStorageService.prototype.deleteItem = /**
     * @param {?} key
     * @return {?}
     */
    function (key) {
        if (this.mwPlatformService.isBrowser()) {
            localStorage.removeItem(this.getPrefixedKey(key));
        }
    };
    /**
     * @return {?}
     */
    MwLocalStorageService.prototype.clear = /**
     * @return {?}
     */
    function () {
        if (this.mwPlatformService.isBrowser()) {
            localStorage.clear();
        }
    };
    /**
     * @private
     * @param {?} key
     * @return {?}
     */
    MwLocalStorageService.prototype.getPrefixedKey = /**
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return this.mwEnvironmentService.getValue(this.envKeyPrefix, '') + key;
    };
    MwLocalStorageService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root',
                },] }
    ];
    /** @nocollapse */
    MwLocalStorageService.ctorParameters = function () { return [
        { type: MwPlatformService },
        { type: MwEnvironmentService }
    ]; };
    /** @nocollapse */ MwLocalStorageService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function MwLocalStorageService_Factory() { return new MwLocalStorageService(i0.ɵɵinject(i1.MwPlatformService), i0.ɵɵinject(i2.MwEnvironmentService)); }, token: MwLocalStorageService, providedIn: "root" });
    return MwLocalStorageService;
}());
export { MwLocalStorageService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    MwLocalStorageService.prototype.envKeyPrefix;
    /**
     * @type {?}
     * @private
     */
    MwLocalStorageService.prototype.mwPlatformService;
    /**
     * @type {?}
     * @private
     */
    MwLocalStorageService.prototype.mwEnvironmentService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXctbG9jYWwtc3RvcmFnZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG13LWFuZ3VsYXIvY29yZS8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9tdy1sb2NhbC1zdG9yYWdlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDaEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7Ozs7QUFFMUQ7SUFNRSwrQkFBb0IsaUJBQW9DLEVBQVUsb0JBQTBDO1FBQXhGLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFBVSx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXNCO1FBRjNGLGlCQUFZLEdBQUcsdUJBQXVCLENBQUM7SUFFdUQsQ0FBQzs7Ozs7O0lBRXhHLHlDQUFTOzs7OztJQUFqQixVQUFrQixJQUFTO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5QixDQUFDOzs7Ozs7O0lBRU8sMkNBQVc7Ozs7OztJQUFuQixVQUF1QixJQUFZO1FBQ2pDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQixDQUFDOzs7Ozs7SUFFRCx1Q0FBTzs7Ozs7SUFBUCxVQUFRLEdBQVcsRUFBRSxLQUFVO1FBQzdCLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxFQUFFOztnQkFDaEMsY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO1lBQzVDLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUNoRTtJQUNILENBQUM7Ozs7OztJQUVELHVDQUFPOzs7OztJQUFQLFVBQVcsR0FBVztRQUNwQixJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsRUFBRTs7Z0JBQ2hDLEtBQUssR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUQsSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFO2dCQUNsQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUksS0FBSyxDQUFDLENBQUM7YUFDbkM7U0FDRjtRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQzs7Ozs7SUFFRCwwQ0FBVTs7OztJQUFWLFVBQVcsR0FBVztRQUNwQixJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsRUFBRTtZQUN0QyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUNuRDtJQUNILENBQUM7Ozs7SUFFRCxxQ0FBSzs7O0lBQUw7UUFDRSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsRUFBRTtZQUN0QyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDOzs7Ozs7SUFFTyw4Q0FBYzs7Ozs7SUFBdEIsVUFBdUIsR0FBVztRQUNoQyxPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDekUsQ0FBQzs7Z0JBaERGLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7Ozs7Z0JBSlEsaUJBQWlCO2dCQURqQixvQkFBb0I7OztnQ0FEN0I7Q0FxREMsQUFqREQsSUFpREM7U0E5Q1kscUJBQXFCOzs7Ozs7SUFDaEMsNkNBQXdEOzs7OztJQUU1QyxrREFBNEM7Ozs7O0lBQUUscURBQWtEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTXdFbnZpcm9ubWVudFNlcnZpY2UgfSBmcm9tICcuL213LWVudmlyb25tZW50LnNlcnZpY2UnO1xuaW1wb3J0IHsgTXdQbGF0Zm9ybVNlcnZpY2UgfSBmcm9tICcuL213LXBsYXRmb3JtLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgTXdMb2NhbFN0b3JhZ2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBlbnZLZXlQcmVmaXggPSAnbG9jYWxTdG9yYWdlS2V5UHJlZml4JztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG13UGxhdGZvcm1TZXJ2aWNlOiBNd1BsYXRmb3JtU2VydmljZSwgcHJpdmF0ZSBtd0Vudmlyb25tZW50U2VydmljZTogTXdFbnZpcm9ubWVudFNlcnZpY2UpIHt9XG5cbiAgcHJpdmF0ZSBzZXJpYWxpemUoZGF0YTogYW55KTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHVuc2VyaWFsaXplPFQ+KGRhdGE6IHN0cmluZyk6IFQge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICB9XG5cbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLm13UGxhdGZvcm1TZXJ2aWNlLmlzQnJvd3NlcigpKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkRGF0YSA9IHRoaXMuc2VyaWFsaXplKHZhbHVlKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuZ2V0UHJlZml4ZWRLZXkoa2V5KSwgc2VyaWFsaXplZERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIGdldEl0ZW08VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMubXdQbGF0Zm9ybVNlcnZpY2UuaXNCcm93c2VyKCkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5nZXRQcmVmaXhlZEtleShrZXkpKTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bnNlcmlhbGl6ZTxUPih2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZWxldGVJdGVtKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubXdQbGF0Zm9ybVNlcnZpY2UuaXNCcm93c2VyKCkpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuZ2V0UHJlZml4ZWRLZXkoa2V5KSk7XG4gICAgfVxuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubXdQbGF0Zm9ybVNlcnZpY2UuaXNCcm93c2VyKCkpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0UHJlZml4ZWRLZXkoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm13RW52aXJvbm1lbnRTZXJ2aWNlLmdldFZhbHVlKHRoaXMuZW52S2V5UHJlZml4LCAnJykgKyBrZXk7XG4gIH1cbn1cbiJdfQ==